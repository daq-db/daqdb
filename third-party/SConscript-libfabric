Import('env')

libfabric_include = [
	Dir('./libfabric/include'),
	]
libfabric_libs = [
	Dir('#/bin/libfabric/lib'),
	]
libfabric_rpath = [
	'libfabric/lib',
	]

env.Append(CPPPATH = libfabric_include)
env.Append(LIBPATH = libfabric_libs)
env.Append(RPATH = libfabric_rpath)

libfabric = env.Command('#/bin/libfabric/lib/libfabric.so', "", 'cd %s && libtoolize && ./autogen.sh && ./configure --prefix=%s &&  make install' % (Dir('#/third-party/libfabric').abspath, Dir('#/bin/libfabric/').abspath))
env.Clean(libfabric, '#/bin/libfabric')
