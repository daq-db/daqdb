Import('env')

pmdk_include = [
	Dir('./pmdk/include'),
	Dir('./pmdk/src/include'),
	]
pmdk_libs = [
	Dir('#/bin/pmdk/lib'),
	]
pmdk_rpath = [
	'pmdk/lib',
	]

env.Append(CPPPATH = pmdk_include)
env.Append(LIBPATH = pmdk_libs)
env.Append(RPATH = pmdk_rpath)

pmdk = env.Command(['#bin/pmdk/lib/libpmem.so', '#bin/pmdk/lib/libpmemobj.so'], "", 'cd %s && make install prefix=%s' % (Dir('#third-party/pmdk').abspath, Dir('#bin/pmdk').abspath))
env.Clean(pmdk, '#/bin/pmdk')
